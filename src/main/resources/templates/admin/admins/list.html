<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{admin/layout/main}">
<head>
    <title>Admin Management</title>
</head>
<body>

<!-- Page Title -->
<div layout:fragment="page-title">
    <i class="fas fa-user-shield"></i> Admin Management
</div>

<!-- Breadcrumb -->
<ol class="breadcrumb float-sm-right" layout:fragment="breadcrumb">
    <li class="breadcrumb-item"><a th:href="@{/admin/dashboard}">Home</a></li>
    <li class="breadcrumb-item active">Admins</li>
</ol>

<!-- Main Content -->
<div layout:fragment="content">

    <!-- Success/Error Messages -->
    <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <i class="icon fas fa-check"></i>
        <span th:text="${successMessage}"></span>
    </div>

    <div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <i class="icon fas fa-ban"></i>
        <span th:text="${errorMessage}"></span>
    </div>

    <!-- Statistics Cards -->
    <div class="row">
        <div class="col-lg-4 col-6">
            <div class="small-box bg-primary">
                <div class="inner">
                    <h3 th:text="${statistics.totalAdmins}">0</h3>
                    <p>Total Admins</p>
                </div>
                <div class="icon">
                    <i class="fas fa-user-shield"></i>
                </div>
            </div>
        </div>

        <div class="col-lg-4 col-6">
            <div class="small-box bg-success">
                <div class="inner">
                    <h3 th:text="${statistics.activeAdmins}">0</h3>
                    <p>Active Admins</p>
                </div>
                <div class="icon">
                    <i class="fas fa-user-check"></i>
                </div>
            </div>
        </div>

        <div class="col-lg-4 col-6">
            <div class="small-box bg-danger">
                <div class="inner">
                    <h3 th:text="${statistics.inactiveAdmins}">0</h3>
                    <p>Inactive Admins</p>
                </div>
                <div class="icon">
                    <i class="fas fa-user-times"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Search and Filter Card -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-title"><i class="fas fa-search"></i> Search & Filter</h3>
            <div class="card-tools">
                <button type="button" class="btn btn-tool" data-card-widget="collapse">
                    <i class="fas fa-minus"></i>
                </button>
            </div>
        </div>
        <div class="card-body">
            <form th:action="@{/admin/admins}" method="get">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="keyword">Search Keyword</label>
                            <input type="text" class="form-control" id="keyword" name="keyword"
                                   th:value="${criteria.keyword}" placeholder="Name or email...">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="isActive">Status</label>
                            <select class="form-control" id="isActive" name="isActive">
                                <option value="">All Status</option>
                                <option value="true" th:selected="${criteria.isActive == true}">Active</option>
                                <option value="false" th:selected="${criteria.isActive == false}">Inactive</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <label>&nbsp;</label>
                            <button type="submit" class="btn btn-primary btn-block">
                                <i class="fas fa-search"></i> Search
                            </button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Admins Table Card -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-title"><i class="fas fa-list"></i> Admins List</h3>
            <div class="card-tools">
                <a th:href="@{/admin/admins/create}" class="btn btn-success btn-sm">
                    <i class="fas fa-plus"></i> Create New Admin
                </a>
            </div>
        </div>
        <div class="card-body table-responsive p-0">
            <table class="table table-hover text-nowrap">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Status</th>
                        <th>Created At</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:if="${admins.totalElements == 0}">
                        <td colspan="7" class="text-center">No admins found</td>
                    </tr>
                    <tr th:each="admin : ${admins.content}">
                        <td th:text="${admin.id}">1</td>
                        <td th:text="${admin.name}">Admin Name</td>
                        <td th:text="${admin.email}">admin@example.com</td>
                        <td th:text="${admin.phone ?: '-'}">-</td>
                        <td>
                            <span class="badge" th:classappend="${admin.statusBadgeClass}"
                                  th:text="${admin.statusText}">Active</span>
                        </td>
                        <td th:text="${#temporals.format(admin.createdAt, 'yyyy-MM-dd HH:mm')}">2024-01-01</td>
                        <td>
                            <a th:href="@{/admin/admins/{id}(id=${admin.id})}" class="btn btn-info btn-sm" title="View">
                                <i class="fas fa-eye"></i>
                            </a>
                            <a th:href="@{/admin/admins/{id}/edit(id=${admin.id})}" class="btn btn-primary btn-sm" title="Edit">
                                <i class="fas fa-edit"></i>
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <div class="card-footer clearfix" th:if="${admins.totalPages > 1}">
            <ul class="pagination pagination-sm m-0 float-right">
                <!-- First Page -->
                <li class="page-item" th:classappend="${admins.first} ? 'disabled'">
                    <a class="page-link" 
                       th:href="@{/admin/admins(keyword=${criteria.keyword},isActive=${criteria.isActive},page=0,size=${criteria.size},sortBy=${criteria.sortBy},sortDir=${criteria.sortDir})}">
                        <i class="fas fa-angle-double-left"></i>
                    </a>
                </li>

                <!-- Previous Page -->
                <li class="page-item" th:classappend="${admins.first} ? 'disabled'">
                    <a class="page-link" 
                       th:href="@{/admin/admins(keyword=${criteria.keyword},isActive=${criteria.isActive},page=${admins.number - 1},size=${criteria.size},sortBy=${criteria.sortBy},sortDir=${criteria.sortDir})}">
                        <i class="fas fa-angle-left"></i>
                    </a>
                </li>

                <!-- Page Numbers -->
                <li class="page-item" th:each="i : ${#numbers.sequence(0, admins.totalPages - 1)}"
                    th:if="${i >= admins.number - 2 && i <= admins.number + 2}"
                    th:classappend="${i == admins.number} ? 'active'">
                    <a class="page-link" 
                       th:href="@{/admin/admins(keyword=${criteria.keyword},isActive=${criteria.isActive},page=${i},size=${criteria.size},sortBy=${criteria.sortBy},sortDir=${criteria.sortDir})}"
                       th:text="${i + 1}">1</a>
                </li>

                <!-- Next Page -->
                <li class="page-item" th:classappend="${admins.last} ? 'disabled'">
                    <a class="page-link" 
                       th:href="@{/admin/admins(keyword=${criteria.keyword},isActive=${criteria.isActive},page=${admins.number + 1},size=${criteria.size},sortBy=${criteria.sortBy},sortDir=${criteria.sortDir})}">
                        <i class="fas fa-angle-right"></i>
                    </a>
                </li>

                <!-- Last Page -->
                <li class="page-item" th:classappend="${admins.last} ? 'disabled'">
                    <a class="page-link" 
                       th:href="@{/admin/admins(keyword=${criteria.keyword},isActive=${criteria.isActive},page=${admins.totalPages - 1},size=${criteria.size},sortBy=${criteria.sortBy},sortDir=${criteria.sortDir})}">
                        <i class="fas fa-angle-double-right"></i>
                    </a>
                </li>
            </ul>

            <div class="float-left">
                <small>Showing [[${admins.number * admins.size + 1}]] to [[${(admins.number + 1) * admins.size > admins.totalElements ? admins.totalElements : (admins.number + 1) * admins.size}]] of [[${admins.totalElements}]] entries</small>
            </div>
        </div>
    </div>

</div>

</body>
</html>
